<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                template="/templates/template-business.xhtml"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:p="http://primefaces.org/ui"
                xmlns:f="http://xmlns.jcp.org/jsf/core"
                xmlns:c="http://java.sun.com/jsp/jstl/core">

    <ui:define name="negocio">
        <link rel="stylesheet" type="text/css" href="#{resource['css/content.css']}" />

        <div id="paperMain">
            <div class="tituloCont" align="center">
                <i class="fa fa-deaf fa-2x titleIcon" aria-hidden="true"></i>
                <div style="display: inline-block">
                    <h:outputLabel styleClass="titleMain" value="Administración de Reportes" />
                    <h:outputLabel styleClass="subtitleMain" value="Configura todos los tipos de reportes que posee la aplicación"/>
                </div>
            </div>
            <div class="contenidoPrinc" align="center">
                <div class="descripcion" align="center">
                    <div class="descText">
                        Navegue por las pestañas para configurar el tipo de reporte que necesita
                    </div>
                </div>
                <div>

                    <h:form id="formReporte" style="margin: 20px" >
                        <p:selectOneMenu value="#{reportsManagedBean.rolReporteSel}" style="width: 300px" converter="CtlRolesReportesConverter" >
                            <p:ajax listener="#{reportsManagedBean.obtenerParametrosDelReporte()}" update="panelParametros" />
                            <f:selectItems value="#{reportsManagedBean.rolesReportes}" var="rolRep" itemLabel="#{rolRep.repId.repNombre}" itemValue="#{rolRep}"/>
                        </p:selectOneMenu>
                        <hr style="margin: 10px" width="400"/>
                        <h:panelGrid columns="2" id="panelParametros" style="margin: 20px">
                            <c:forEach items="#{reportsManagedBean.reportesParametros}" var="repPa" varStatus="loop">
                                <h:outputLabel styleClass="text" value="#{repPa.rppNombre}" rendered="#{!(repPa.rppTipo eq 'FECHAS')}"/>
                                <p:inputText id="cmpTEXTO_#{repPa.rppId}" rendered="#{repPa.rppTipo eq 'TEXTO'}" required="false"  style="width: 200px" />
                                <p:calendar id="cmpUNAFECHA_#{repPa.rppId}" rendered="#{repPa.rppTipo eq 'UNAFECHA'}" pattern="dd-MM-yyyy" locale="es" required="false"/>
                                <p:calendar id="cmpMES_#{repPa.rppId}" rendered="#{repPa.rppTipo eq 'MES'}" pattern="MM-yyyy" locale="es" required="false"/>
                                <p:calendar id="cmpANIO_#{repPa.rppId}" value="#{repPa.rppValor}" pattern="yyyy" rendered="#{repPa.rppTipo eq 'ANIO'}" required="false"/>
                                <h:outputLabel styleClass="text" value="Fecha Inicial" rendered="#{repPa.rppTipo eq 'FECHAS'}"/>
                                <p:calendar id="cmp1FECHAS_#{repPa.rppId}"  pattern="dd-MM-yyyy" rendered="#{repPa.rppTipo eq 'FECHAS'}" required="false" locale="es"/>
                                <h:outputLabel styleClass="text" value="Fecha Final" rendered="#{repPa.rppTipo eq 'FECHAS'}"/>
                                <p:calendar id="cmp2FECHAS_#{repPa.rppId}" pattern="dd-MM-yyyy" rendered="#{repPa.rppTipo eq 'FECHAS'}" required="false" locale="es"/>
                                <p:selectOneMenu id="cmpLISTA_#{repPa.rppId}" rendered="#{repPa.rppTipo eq 'LISTA'}" style="width: 200px" >
                                    <f:selectItems value="#{reportsManagedBean.getListaActual(loop.index)}" var="obj" itemLabel="#{obj[0]}" itemValue="#{obj[1]}"  />
                                    <p:ajax listener="#{reportsManagedBean.cambio(obj)}" />
                                    <f:attribute name="validation" value="#{obj}" />
                                </p:selectOneMenu>

                            </c:forEach>
                        </h:panelGrid>
                        <div align="center">
                            <p:commandButton value="Generar" action="#{reportsManagedBean.generarReporte()}" immediate="true" ajax="false"/>
                        </div>
                    </h:form>

                </div>
            </div>
        </div>
    </ui:define>
</ui:composition>